<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>Replicating Claude Swe Bench | Charlie Hulcher</title>
  
  
<meta name="title" content="Replicating Claude Swe Bench | Charlie Hulcher">
<meta name="description" content="Replicating Claude&#39;s performance on autonomously solving Software Engineering tasks.">
<meta name="author" content="Charlie Hulcher">


<meta property="og:type" content="article">
<meta property="og:url" content="http://localhost:1313/posts/replicating-claude-swe-bench/">
<meta property="og:title" content="Replicating Claude Swe Bench | Charlie Hulcher">
<meta property="og:description" content="Replicating Claude&#39;s performance on autonomously solving Software Engineering tasks.">
<meta property="og:image" content="http://localhost:1313/images/profile/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">


<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:domain" content="localhost:1313">
<meta property="twitter:url" content="http://localhost:1313/posts/replicating-claude-swe-bench/">
<meta name="twitter:title" content="Replicating Claude Swe Bench | Charlie Hulcher">
<meta name="twitter:description" content="Replicating Claude&#39;s performance on autonomously solving Software Engineering tasks.">
<meta name="twitter:image" content="http://localhost:1313/images/profile/og-image.png">


<link rel="canonical" href="http://localhost:1313/posts/replicating-claude-swe-bench/">



<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/replicating-claude-swe-bench/">



<meta property="article:published_time" content="2024-12-04T08:26:14-08:00">

<meta property="article:modified_time" content="2024-12-04T08:26:14-08:00">


<meta property="article:tags" content="programming, AI">


<meta property="article:author" content="Charlie Hulcher">




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  
  "@type": "BlogPosting",
  "headline": "Replicating Claude Swe Bench",
  "description": "Replicating Claude\u0027s performance on autonomously solving Software Engineering tasks.",
  "author": {
    "@type": "Person",
    "name": "Charlie Hulcher",
    "url": "https:\/\/charlie.engineer\/"
  },
  "datePublished": "2024-12-04T08:26:14-08:00",
  "dateModified": "2024-12-04T08:26:14-08:00",
  
  "url": "http:\/\/localhost:1313\/posts\/replicating-claude-swe-bench\/",
  "keywords": "programming, AI",
  "publisher": {
    "@type": "Person",
    "name": "Charlie Hulcher"
  }
  
}</script>



<meta name="robots" content="noindex, nofollow">


  
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<meta name="msapplication-TileColor" content="#000000">
<meta name="theme-color" content="#000000">

  
  
  
  
  
  <link rel="stylesheet" href="/css/main.css">
  
  
  
</head>
<body class="bg-black">
  
<div class="min-h-screen bg-black text-white font-mono">
  <div class="max-w-3xl mx-auto px-4 py-12">
    <nav class="mb-8">
      <a href="/" class="inline-flex items-center text-zinc-400 hover:text-white transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
        Back to Home
      </a>
    </nav>

    <article class="space-y-8">
      <header class="space-y-4">
        <h1 class="text-3xl md:text-4xl font-bold font-mono">Replicating Claude Swe Bench</h1>
        <div class="flex flex-col space-y-2">
          <div class="flex items-center space-x-4 text-zinc-400">
            <div class="flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
              <time datetime="2024-12-04">12/2024</time>
            </div>
            
            <div class="flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
              <span>4 min read</span>
            </div>
            
          </div>
          
          <div class="flex items-center flex-wrap gap-2">
            
            <a href="/tags/programming" class="text-xs bg-zinc-800 text-zinc-300 hover:bg-zinc-700 hover:text-white px-2 py-1 rounded transition-colors">programming</a>
            
            <a href="/tags/ai" class="text-xs bg-zinc-800 text-zinc-300 hover:bg-zinc-700 hover:text-white px-2 py-1 rounded transition-colors">AI</a>
            
          </div>
          
        </div>
      </header>

      
        
        
      

      <div class="prose prose-invert">
        <p><a href="https://www.anthropic.com/research/swe-bench-sonnet">Anthropic recently released findings</a> of using the updated Claude 3.5 Sonnet model to solve real world software engineering tasks. At the time, their published performance topped the leaderboard at 49%. What&rsquo;s remarkable about their solution is how simple it was: they did not over-engineer an optimized solution, instead just giving AI some basic tools and letting it work on the problems.</p>
<p>This post details replicating their results.</p>
<h2 id="the-evaluation-set">The Evaluation Set</h2>
<p><a href="https://huggingface.co/datasets/princeton-nlp/SWE-bench_Verified">SWE Bench Verified</a> is the set of tasks that Anthropic validated against. This set of 500 questions has been reviewed by humans to guarantee they are solvable.</p>
<h2 id="our-approach">Our Approach</h2>
<p>In order to replicate their results, we&rsquo;ll need to:</p>
<ol>
<li>Set up SWE Bench locally to run the evaluations</li>
<li>Create simple scaffolding for the SWE Bench evaluator to present the problems to the model</li>
<li>Replicate the tools so the model has the ability to act and verify its work for evaluation</li>
</ol>
<h3 id="setting-up-swe-bench">Setting up SWE Bench</h3>
<p>To set up SWE Bench, I cloned the repo, then asked Claude in Cursor Agent mode to set up the repository:</p>
<p><img src="Screenshot%202024-12-04%20at%2011.27.16%E2%80%AFAM.png" alt="Setting up SWE Bench"></p>
<h3 id="the-harness">The Harness</h3>
<h3 id="the-tools">The Tools</h3>
<p>Anthropic included the system and tool prompts in their post, replicated here:</p>
<p>System Prompt:</p>
<pre tabindex="0"><code>&lt;uploaded_files&gt;
{location}
&lt;/uploaded_files&gt;
I&#39;ve uploaded a python code repository in the directory {location} (not in /tmp/inputs). Consider the following PR description:

&lt;pr_description&gt;
{pr_description}
&lt;/pr_description&gt;

Can you help me implement the necessary changes to the repository so that the requirements specified in the &lt;pr_description&gt; are met?
I&#39;ve already taken care of all changes to any of the test files described in the &lt;pr_description&gt;. This means you DON&#39;T have to modify the testing logic or any of the tests in any way!

Your task is to make the minimal changes to non-tests files in the {location} directory to ensure the &lt;pr_description&gt; is satisfied.

Follow these steps to resolve the issue:
1. As a first step, it might be a good idea to explore the repo to familiarize yourself with its structure.
2. Create a script to reproduce the error and execute it with `python &lt;filename.py&gt;` using the BashTool, to confirm the error
3. Edit the sourcecode of the repo to resolve the issue
4. Rerun your reproduce script and confirm that the error is fixed!
5. Think about edgecases and make sure your fix handles them as well

Your thinking should be thorough and so it&#39;s fine if it&#39;s very long.
</code></pre><p>Bash Tool Prompt:</p>
<pre tabindex="0"><code>{
   &#34;name&#34;: &#34;bash&#34;,
   &#34;description&#34;: &#34;Run commands in a bash shell\n
* When invoking this tool, the contents of the \&#34;command\&#34; parameter does NOT need to be XML-escaped.\n
* You don&#39;t have access to the internet via this tool.\n
* You do have access to a mirror of common linux and python packages via apt and pip.\n
* State is persistent across command calls and discussions with the user.\n
* To inspect a particular line range of a file, e.g. lines 10-25, try &#39;sed -n 10,25p /path/to/the/file&#39;.\n
* Please avoid commands that may produce a very large amount of output.\n
* Please run long lived commands in the background, e.g. &#39;sleep 10 &amp;&#39; or start a server in the background.&#34;,
   &#34;input_schema&#34;: {
       &#34;type&#34;: &#34;object&#34;,
       &#34;properties&#34;: {
           &#34;command&#34;: {
               &#34;type&#34;: &#34;string&#34;,
               &#34;description&#34;: &#34;The bash command to run.&#34;
           }
       },
       &#34;required&#34;: [&#34;command&#34;]
   }
}
</code></pre><p>Edit Tool Prompt:</p>
<pre tabindex="0"><code>{
   &#34;name&#34;: &#34;str_replace_editor&#34;,
   &#34;description&#34;: &#34;Custom editing tool for viewing, creating and editing files\n
* State is persistent across command calls and discussions with the user\n
* If `path` is a file, `view` displays the result of applying `cat -n`. If `path` is a directory, `view` lists non-hidden files and directories up to 2 levels deep\n
* The `create` command cannot be used if the specified `path` already exists as a file\n
* If a `command` generates a long output, it will be truncated and marked with `&lt;response clipped&gt;` \n
* The `undo_edit` command will revert the last edit made to the file at `path`\n
\n
Notes for using the `str_replace` command:\n
* The `old_str` parameter should match EXACTLY one or more consecutive lines from the original file. Be mindful of whitespaces!\n
* If the `old_str` parameter is not unique in the file, the replacement will not be performed. Make sure to include enough context in `old_str` to make it unique\n
* The `new_str` parameter should contain the edited lines that should replace the `old_str`&#34;,
...
</code></pre><p>(This edit tool prompt is truncated).</p>
<p>To replia</p>

      </div>
    </article>

    <footer class="mt-12 pt-8 border-t border-zinc-800">
      <div class="flex justify-between items-center">
        <div class="flex items-center space-x-4">
          
          <img src="/images/profile/avatar.png" alt="Charlie Hulcher" width="50" height="50" class="rounded-full grayscale">
          <div>
            <h3 class="font-bold font-mono">Charlie Hulcher</h3>
            <p class="text-zinc-400 text-sm">Engineering Leader &amp; AI Researcher</p>
          </div>
          
        </div>
      </div>
    </footer>
  </div>
</div>

</body>
</html>